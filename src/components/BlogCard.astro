---
import Typo from "./typo/Typo.astro";
import Badge from "./Badge.astro";
import { formatDate } from "../lib/utils/date";

interface Props {
  title: string;
  excerpt: string;
  author: string;
  date: string;
  readTime: string;
  tags: string[];
  image?: string;
  slug: string;
}

const {
  title,
  excerpt,
  author,
  date,
  readTime,
  tags = [],
  image,
  slug,
} = Astro.props;

const formattedDate = formatDate(date);
---

<article
  class="border border-tertiary rounded-md p-4 flex flex-col h-full transition-all duration-200 hover:shadow-md hover:-translate-y-0.5"
>
  {
    image && (
      <img
        src={image}
        alt={title}
        class="w-full h-[150px] object-cover rounded-md mb-3"
        loading="lazy"
      />
    )
  }

  <Typo variant="tertiary" class="mb-2">
    {formattedDate}
  </Typo>

  <Typo variant="h3" color="primary" class="mb-2">
    <a href={`/blog/${slug}`} class="hover:underline">
      {title}
    </a>
  </Typo>

  <Typo variant="normal" color="dark" class="mb-3 flex-grow">
    {excerpt}
  </Typo>

  {
    tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mt-auto pt-2">
        {tags.map((tag) => (
          <Badge>{tag}</Badge>
        ))}
      </div>
    )
  }
</article>
