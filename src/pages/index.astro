---
import Typo from "@/components/typo/Typo.astro";
import FreeStyleLayout from "@/layouts/FreeStyleLayout.astro";
import NavigationBar from "@/components/navigation-bar/NavigationBar.astro";
import Footer from "@/components/Footer.astro";
import MeFloat from "@/components/MeFloat.astro";
import TechStackTable from "@/components/TechStackTable.astro";
import { techStacks } from "@/data/techStacks";
import ProjectCard from "@/components/ProjectCard.astro";
import { projects } from "@/data/projects";
import BlogPostsClient from "@/components/blog/BlogPosts.client";

// Note: We've moved the blog posts fetching logic to the client component
---

<FreeStyleLayout title="Home">
  <NavigationBar />
  <section class="min-h-dvh">
    {/* Hero section */}
    <div class="bg-primary/10 flex flex-col items-center justify-center h-dvh">
      <div class="main-container py-8 md:py-32 px-4">
        <div class="grid grid-cols-1 md:grid-cols-10 gap-4">
          <div class="md:col-span-7 p-4 md:p-0">
            <h1
              class="text-primary font-bold font-primary text-[32px] md:text-[40px text-center md:text-left mb-3"
            >
              Iâ€™m Luckytime1996
            </h1>
            <Typo variant="normal" class="hidden md:block">
              A Full Stack Developer who loves exploring new projects,
              technologies, and programming techniques, believing that
              well-crafted software can solve problems and create value for
              people.
            </Typo>
            <Typo variant="normal" class="block md:hidden text-center">
              A Full Stack Developer who loves exploring new projects,
              technologies, and programming techniques
            </Typo>
          </div>
          <div class="md:col-span-3 flex justify-center items-center">
            <MeFloat />
          </div>
        </div>
      </div>
    </div>

    <!-- Tech Stack Section -->
    <div class="bg-gray-50">
      <div class="main-container py-12 md:py-20 px-4">
        <Typo variant="h2" color="primary" class="mb-8">Tech stack</Typo>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {
            techStacks.map((stack) => (
              <TechStackTable
                class="col-span-1"
                title={stack.title}
                items={stack.items}
              />
            ))
          }
        </div>
      </div>
    </div>

    <!-- Projects Section -->
    <div class="bg-white">
      <div class="main-container py-12 md:py-20 px-4">
        <Typo variant="h2" color="primary" class="mb-8">Side projects</Typo>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {projects.map((project) => <ProjectCard {...project} />)}
        </div>
      </div>
    </div>

    <!-- Blog Section -->
    <div class="bg-gray-50">
      <div class="main-container py-12 md:py-20 px-4">
        <Typo variant="h2" color="primary" class="mb-8">Latest Articles</Typo>
        <!-- Client-side component will handle the loading and rendering -->
        <BlogPostsClient client:load />
      </div>
    </div>
    <Footer />
  </section>
</FreeStyleLayout>
